<template name="home">
    <div class="searchContainer">
        <h1 id="siteName">planDeis</h1>
        
        <div id="searchForm">
            <form id="search_main">
                <input type="text" placeholder="Try COSI12b, calculus, MUS..." name="keyword" id="searchBar" class="js-submit-search" autocomplete="off">
            </form>
            {{#if notTalking}}
              {{> voiceButton}}
            {{else}}
              <div class="ui active inline loader"></div>
            {{/if}}

            <div class="ui checkbox">
                <input type="checkbox" class="js-if-clear-params" checked>
                <label>Clear parameters when starting new voice search</label>
            </div>
            <br>
            <div class="ui checkbox" style="padding-right: 12px;">
                <input type="checkbox" class="js-if-indep">
                <label>Include independent instructional classes</label>
            </div>

            <div class="ui checkbox">
                <input type="checkbox" class="js-if-not-sure">
                <label>Check if not very sure about the course code</label>
            </div>
        </div>
    </div>
    <div class="ui accordion">
      <div class="title">
        <i class="dropdown icon"></i>
        Advanced Search
      </div>
      <div class="content">
        <div id="advSearch_form" class="ui form">
            <div class="fields">
                <div class="two wide field">
                    <label>Term: </label>
                    <!-- <select name="term" class="js-term form-control">
                        <option value="">Term</option>
                        {{#each term in termList}}
                          <option value="{{term.id}}">{{term.name}}</option>
                        {{/each}}
                    </select> -->
                    <div class="ui selection fluid dropdown js-term">
                      <input type="hidden" name="term">
                      <i class="dropdown icon"></i>
                      <div class="default text">Term</div>
                      <div class="menu">
                        <div class="item" data-value="">All terms</div>
                        {{#each term in termList}}
                          <div class="item" data-value="{{term.id}}">{{term.name}}</div>
                        {{/each}}
                      </div>
                    </div>
                </div>

                <div class="three wide field" id="req-select">
                    <label>Requirement: </label>
                    <select class="js-req ui fluid dropdown" multiple="" id="multi-select">
                        <option value="">Select from the list</option>
                        <option value="CA">CA</option>
                        <option value="FL">FL</option>
                        <option value="HUM">HUM</option>
                        <option value="NW">NW</option>
                        <option value="OC">OC</option>
                        <option value="PE-1">PE-1</option>
                        <option value="PE-SC">PE-SC</option>
                        <option value="QR">QR</option>
                        <option value="QR1">QR1</option>
                        <option value="QR2">QR2</option>
                        <option value="SN">SN</option>
                        <option value="SS">SS</option>
                        <option value="USEM">USEM</option>
                        <option value="USWI">USWI</option>
                        <option value="UWS">UWS</option>
                        <option value="WI">WI</option>
                    </select>
                </div>

                <div class="four wide field">
                    <label>Department: </label>
                    <div class="ui fluid search selection dropdown js-dept" id="search-select">
                        <input type="hidden" name="department" value="">
                        <i class="dropdown icon"></i>
                        <div class="default text">Select or type</div>
                        <div class="menu">
                          <div class="item" data-value="all">All Department</div>
                          <div class="item" data-value="100">African and Afro</div>
                          <div class="item" data-value="200">American Studies</div>
                          <div class="item" data-value="300">Anthropology</div>
                          <div class="item" data-value="400">Arabic Language and Literature</div>
                          <div class="item" data-value="500">Biochemistry</div>
                          <div class="item" data-value="510">Biochemistry and Biophysics</div>
                          <div class="item" data-value="600">Biological Physics</div>
                          <div class="item" data-value="700">Biology</div>
                          <div class="item" data-value="850">Biotechnology</div>
                          <div class="item" data-value="900">Business</div>
                          <div class="item" data-value="1000">Chemistry</div>
                          <div class="item" data-value="1100">Chinese</div>
                          <div class="item" data-value="1200">Classical Studies</div>
                          <div class="item" data-value="1250">Comparative Humanities</div>
                          <div class="item" data-value="1300">Comparative Literature and Culture</div>
                          <div class="item" data-value="1400">Computer Science</div>
                          <div class="item" data-value="1475">Creativity, the Arts, and Social Transformation</div>
                          <div class="item" data-value="1500">East Asian Studies</div>
                          <div class="item" data-value="1600">Economics</div>
                          <div class="item" data-value="1700">Education</div>
                          <div class="item" data-value="1800">English</div>
                          <div class="item" data-value="1850">English as a Second Language</div>
                          <div class="item" data-value="1900">Environmental Studies</div>
                          <div class="item" data-value="2000">European Cultural Studies</div>
                          <div class="item" data-value="2050">Experiential Learning Practicum</div>
                          <div class="item" data-value="2100">Film, Television and Interactive Media</div>
                          <div class="item" data-value="2300">Fine Arts</div>
                          <div class="item" data-value="8000">First Year Seminars (FYS)</div>
                          <div class="item" data-value="2400">French and Francophone Studies</div>
                          <div class="item" data-value="2450">Genetic Counseling</div>
                          <div class="item" data-value="2500">German Studies</div>
                          <div class="item" data-value="2535">Global Studies</div>
                          <div class="item" data-value="2550">Greek</div>
                          <div class="item" data-value="2700">Health: Science, Society, and Policy</div>
                          <div class="item" data-value="2800">Hebrew</div>
                          <div class="item" data-value="2900">Heller School for Social Policy and Management</div>
                          <div class="item" data-value="2950">Hindi</div>
                          <div class="item" data-value="6600">Hispanic Studies</div>
                          <div class="item" data-value="3000">History</div>
                          <div class="item" data-value="3100">History of Ideas</div>
                          <div class="item" data-value="3200">Hornstein Jewish Professional Leadership Program</div>
                          <div class="item" data-value="3300">Independent Interdisciplinary Major</div>
                          <div class="item" data-value="3400">International and Global Studies</div>
                          <div class="item" data-value="3600">International Business School</div>
                          <div class="item" data-value="3700">Internship</div>
                          <div class="item" data-value="3900">Islamic and Middle Eastern Studies</div>
                          <div class="item" data-value="4000">Italian Studies</div>
                          <div class="item" data-value="4100">Japanese</div>
                          <div class="item" data-value="4200">Journalism</div>
                          <div class="item" data-value="4225">Justice Brandeis Semester</div>
                          <div class="item" data-value="4235">Korean</div>
                          <div class="item" data-value="4600">Language and Linguistics</div>
                          <div class="item" data-value="4250">Latin</div>
                          <div class="item" data-value="4300">Latin American and Latino Studies</div>
                          <div class="item" data-value="4400">Legal Studies</div>
                          <div class="item" data-value="4700">Mathematics</div>
                          <div class="item" data-value="4800">Medieval and Renaissance Studies</div>
                          <div class="item" data-value="4900">Molecular and Cell Biology</div>
                          <div class="item" data-value="5000">Music</div>
                          <div class="item" data-value="5100">Near Eastern and Judaic Studies</div>
                          <div class="item" data-value="5200">Neuroscience</div>
                          <div class="item" data-value="5300">Peace, Conflict, and Coexistence Studies</div>
                          <div class="item" data-value="5400">Philosophy</div>
                          <div class="item" data-value="5500">Physical Education</div>
                          <div class="item" data-value="5600">Physics</div>
                          <div class="item" data-value="5700">Politics</div>
                          <div class="item" data-value="5750">Portuguese</div>
                          <div class="item" data-value="5800">Postbaccalaureate Premedical Studies</div>
                          <div class="item" data-value="5900">Psychology</div>
                          <div class="item" data-value="5950">Quantitative Biology</div>
                          <div class="item" data-value="6000">Religious Studies</div>
                          <div class="item" data-value="6300">Russian Studies</div>
                          <div class="item" data-value="6350">Sexuality and Queer Studies</div>
                          <div class="item" data-value="6400">Social Justice and Social Policy</div>
                          <div class="item" data-value="6500">Sociology</div>
                          <div class="item" data-value="6550">South Asian Studies</div>
                          <div class="item" data-value="6700">Theater Arts</div>
                          <div class="item" data-value="6900">Women's, Gender, and Sexuality Studies</div>
                          <div class="item" data-value="7050">University Writing (COMP and UWS)</div>
                          <div class="item" data-value="7000">Yiddish</div>
                        </div>
                    </div>
                </div>

                <div class="three wide field">
                    <label>Professor: </label>
                    <div class="ui search js-prof" id="prof-search">
                        <div class="ui icon input">
                            <input class="prompt" type="text" placeholder="Search professors...">
                            <i class="search icon"></i>
                        </div>
                    <div class="results"></div>
                    </div>
                </div>
            </div>

            <div class="ui horizontal divider">Time and Date</div>

            <div class="fields">
                <div class="three wide field" id="day-select">
                    <label>Days: </label>
                    <select class="js-days ui fluid dropdown" multiple="" id="multi-select-days">
                        <option value="">Select from the list</option>
                        <option value="m">Monday</option>
                        <option value="tu">Tuesday</option>
                        <option value="w">Wednesday</option>
                        <option value="th">Thursday</option>
                        <option value="f">Friday</option>
                    </select>
                </div>

                <div class="three wide field">
                    <label>Start Time: </label>
                    <div class="ui fluid search selection dropdown js-start-time" id="search-select-start-time">
                        <input type="hidden" name="start_time" value="">
                        <i class="dropdown icon"></i>
                        <div class="default text">Select or type</div>
                        <div class="menu">
                            <div class="item" data-value="all">All time</div>
                            <div class="item" data-value="07:00">7:00 AM</div>
                            <div class="item" data-value="07:30">7:30 AM</div>
                            <div class="item" data-value="08:00">8:00 AM</div>
                            <div class="item" data-value="08:30">8:30 AM</div>
                            <div class="item" data-value="09:00">9:00 AM</div>
                            <div class="item" data-value="09:30">9:30 AM</div>
                            <div class="item" data-value="10:00">10:00 AM</div>
                            <div class="item" data-value="10:30">10:30 AM</div>
                            <div class="item" data-value="11:00">11:00 AM</div>
                            <div class="item" data-value="11:30">11:30 AM</div>
                            <div class="item" data-value="12:00">12:00 PM</div>
                            <div class="item" data-value="12:30">12:30 PM</div>
                            <div class="item" data-value="13:00">1:00 PM</div>
                            <div class="item" data-value="13:30">1:30 PM</div>
                            <div class="item" data-value="14:00">2:00 PM</div>
                            <div class="item" data-value="14:30">2:30 PM</div>
                            <div class="item" data-value="15:00">3:00 PM</div>
                            <div class="item" data-value="15:30">3:30 PM</div>
                            <div class="item" data-value="16:00">4:00 PM</div>
                            <div class="item" data-value="16:30">4:30 PM</div>
                            <div class="item" data-value="17:00">5:00 PM</div>
                            <div class="item" data-value="17:30">5:30 PM</div>
                            <div class="item" data-value="18:00">6:00 PM</div>
                            <div class="item" data-value="18:30">6:30 PM</div>
                            <div class="item" data-value="19:00">7:00 PM</div>
                            <div class="item" data-value="19:30">7:30 PM</div>
                            <div class="item" data-value="20:00">8:00 PM</div>
                            <div class="item" data-value="20:30">8:30 PM</div>
                            <div class="item" data-value="21:00">9:00 PM</div>
                            <div class="item" data-value="21:30">9:30 PM</div>
                            <div class="item" data-value="22:00">10:00 PM</div>
                            <div class="item" data-value="22:30">10:30 PM</div>
                        </div>
                    </div>
                </div>

                <div class="three wide field">
                    <label>End Time: </label>
                    <div class="ui fluid search selection dropdown js-end-time" id="search-select-end-time">
                        <input type="hidden" name="end_time" value="">
                        <i class="dropdown icon"></i>
                        <div class="default text">Select or type</div>
                        <div class="menu">
                            <div class="item" data-value="all">All time</div>
                            <div class="item" data-value="07:00">7:00 AM</div>
                            <div class="item" data-value="07:30">7:30 AM</div>
                            <div class="item" data-value="08:00">8:00 AM</div>
                            <div class="item" data-value="08:30">8:30 AM</div>
                            <div class="item" data-value="09:00">9:00 AM</div>
                            <div class="item" data-value="09:30">9:30 AM</div>
                            <div class="item" data-value="10:00">10:00 AM</div>
                            <div class="item" data-value="10:30">10:30 AM</div>
                            <div class="item" data-value="11:00">11:00 AM</div>
                            <div class="item" data-value="11:30">11:30 AM</div>
                            <div class="item" data-value="12:00">12:00 PM</div>
                            <div class="item" data-value="12:30">12:30 PM</div>
                            <div class="item" data-value="13:00">1:00 PM</div>
                            <div class="item" data-value="13:30">1:30 PM</div>
                            <div class="item" data-value="14:00">2:00 PM</div>
                            <div class="item" data-value="14:30">2:30 PM</div>
                            <div class="item" data-value="15:00">3:00 PM</div>
                            <div class="item" data-value="15:30">3:30 PM</div>
                            <div class="item" data-value="16:00">4:00 PM</div>
                            <div class="item" data-value="16:30">4:30 PM</div>
                            <div class="item" data-value="17:00">5:00 PM</div>
                            <div class="item" data-value="17:30">5:30 PM</div>
                            <div class="item" data-value="18:00">6:00 PM</div>
                            <div class="item" data-value="18:30">6:30 PM</div>
                            <div class="item" data-value="19:00">7:00 PM</div>
                            <div class="item" data-value="19:30">7:30 PM</div>
                            <div class="item" data-value="20:00">8:00 PM</div>
                            <div class="item" data-value="20:30">8:30 PM</div>
                            <div class="item" data-value="21:00">9:00 PM</div>
                            <div class="item" data-value="21:30">9:30 PM</div>
                            <div class="item" data-value="22:00">10:00 PM</div>
                            <div class="item" data-value="22:30">10:30 PM</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
      </div>
    </div>
    

    <!-- <p id="be_back">
        We will be back
    </p>
    <br>
    <p id="busy_updating">
        We are busy updating myDeis!
        <br> see you soon :)
    </p> -->

    {{#if showTable}}
        {{> search_result dict=homeDict}}
    {{/if}}
</template>

<template name="search_result">
    {{#if homeDictSet}}
    {{#if courseDataReady}}
        {{> reactiveTable class="ui stackable selectable fixed table js-result-table" collection=courseData settings=settings_course}}
    {{else}}
        {{#if noResult}}
            <br>
           <h2>No Result</h2>
        {{else}}
            <br>
            <div class="ui active inline loader"></div>
        {{/if}}
    {{/if}}

    <div class="overlay"></div>

    <div class="ui container popup" id="home-popup">
        <i class="remove icon pull-right js-close-popup"></i>
        <div class="ui top attached tabular menu" id="popup-tab">
            <a class="active item" data-tab="first">Course Details</a>
            <a class="item" data-tab="second">Section Details</a>
            <a class="item" data-tab="third">Offering History</a>
        </div>

        <div class="ui bottom attached active tab segment" data-tab="first" tab-num="1">
            {{#if detailReady}}
                <h3>Course </h3>
                {{courseInfo.code}} - {{courseInfo.name}}
                <h3>Description</h3>
                {{courseInfo.description}}
                <h3>Requirements </h3>
                {{#each r in getReq courseInfo.requirements}}
                    {{r}}
                {{/each}}
                <h3>Majors </h3>
                {{#if majorInfo}}{{#each item in majorInfo}}{{item}}<br>{{/each}}{{else}}<div class="ui active inline loader"></div>{{/if}}
                <h3>Sections </h3>
                {{#if sectionData}}
                  {{> search_result_time_table dict=dict}}
                {{else}}
                  {{#if notAvailable}}
                    <br>
                    Sorry, this class is no longer available for this semester.
                  {{else}}
                    <div class="ui active inline loader"></div>
                  {{/if}}
                {{/if}}
            {{else}}
                <br>
                <div class="ui active inline loader"></div>
            {{/if}}
        </div>

        <div class="ui bottom attached tab segment" data-tab="second" tab-num="2">
            <div class="ui stackable divided grid">
                <div class="eleven wide column">
                    {{#if sectionData}}
                        <div class="field">
                            <div class="four wide field">
                                <label>Section: </label>
                                <select name="section" class="js-section form-control">
                                    {{#each section in sectionData}}
                                        <option value="{{@index}}">Section {{sectionNum section.section}}</option>
                                    {{/each}}
                                </select>
                            </div>
                        </div>
                        <h3>Professor</h3>
                        {{#if (profNameLoading sectionDetail.id)}}<div class="ui active inline loader"></div>{{/if}}{{{getProfInfo sectionDetail.instructors sectionDetail.id}}}<br>
                        <h3>Time and Place</h3>
                        {{#if sectionDetail.times}}
                            {{#each time in sectionDetail.times}}
                                {{#if notFirstTime @index}}<div class="ui horizontal divider"></div>{{/if}}
                                {{#if time.start}}<b>{{getSectionDays time.days}}:</b> {{convertTime time.start}} to {{convertTime time.end}}<br>{{else}}TBD<br>{{/if}}
                                {{#if time.building}}{{time.building}} - {{time.room}}<br>{{else}}Please wait until Brandeis updates place information for this section<br>{{/if}}
                                {{#if time.type}}<b>Type: </b>{{time.type}}{{/if}}
                            {{/each}}
                        {{else}}
                            <p>Please wait until Brandeis updates time and day information for this section</p>
                        {{/if}}
                        <h3>Enrollment</h3>
                        {{sectionDetail.enrolled}}/{{limitNum sectionDetail.limit}} - {{sectionDetail.status_text}}
                        <h3>Detailed Description</h3>
                        <p>{{#if sectionDetail.details}}{{sectionDetail.details}}{{else}}Currently no additional information for this section{{/if}}</p>
                        <h3>Textbook Information</h3>
                        <button class="ui basic button js-textbook" course-id="{{sectionDetail.course}}" section-num="{{sectionDetail.section}}"><i class="book icon"></i>Click to view</button>
                    {{else}}
                      {{#if notAvailable}}
                        <br>
                        Sorry, this class is no longer available for this semester.
                      {{else}}
                        <div class="ui active inline loader"></div>
                      {{/if}}
                    {{/if}}
                </div>

                <div class="five wide column">
                    <div class="ui vertical labeled icon buttons">
                        {{#if userIsLoggedIn}}
                          {{#if notAvailable}}
                            <button class="ui basic disabled button js-add-to-list">
                              <i class="plus icon"></i>
                              Add to my wishlist
                            </button>
                          {{else}}
                            {{#if addedToWishlist}}
                              <button class="ui blue button js-add-to-list">
                                Course added to wishlist
                              </button>
                            {{else}}
                              <button class="ui basic button js-add-to-list">
                                <i class="plus icon"></i>
                                Add to my wishlist
                              </button>
                            {{/if}}
                          {{/if}}
                        {{else}} <!--User not logged in-->
                          {{#if notAvailable}}
                          {{else}}
                            <button class="ui basic button">
                              <i class="plus icon"></i>
                              Log in to add to wishlist
                            </button>
                          {{/if}}
                        {{/if}}

                        <!--<button class="ui basic button">
                            <i class="alarm icon"></i>
                            Watch this section for any change
                        </button>-->
                        {{#if notAvailable}}
                          <button class="ui basic disabled button js-section-up">
                              <i class="angle double up icon"></i>
                              Previous section
                          </button>

                          <button class="ui basic disabled button js-section-down">
                              <i class="angle double down icon"></i>
                              Next section
                          </button>
                        {{else}}
                          <button class="ui basic button js-section-up">
                              <i class="angle double up icon"></i>
                              Previous section
                          </button>

                          <button class="ui basic button js-section-down">
                              <i class="angle double down icon"></i>
                              Next section
                          </button>
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>

        <div class="ui bottom attached tab segment" data-tab="third" tab-num="3">
            {{#if historyReady}}
              <h3>Course Offering History:</h3>
              <ul>
                <br>
                {{#each getOfferedHistory}}
                  <li>{{this}}<br></li>
                {{/each}}
              </ul>
            {{else}}
              {{fetchHistory}}
              <div class="ui active inline loader"></div>
            {{/if}}
        </div>
    </div>
    {{else}}
        {{setHomeDict dict}}
        <div class="ui active inline loader"></div>
    {{/if}}
</template>

<template name="description_detail">
    <div class="ui accordion">
        <div class="title">
            <i class="dropdown icon"></i>
            {{showDescription this.description}}
        </div>

        <div class="content">
            {{this.description}}
        </div>
    </div>
</template>

<template name="search_result_time_table">
    {{#if homeDictSet}}
        {{> reactiveTable class="ui table stackable js-section-table" collection=sectionData settings=settings_result}}
    {{else}}
        {{setHomeDict dict}}
        <div class="ui active inline loader"></div>
    {{/if}}
</template>

<template name="voiceButton">
  <i class="big unmute icon js-voice-search"></i>
</template>
